<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>animate - tween</title>
	<style>
			html, body {
				height: 100%;
				margin: 0;
				background: #FFF;
			}
			
			.bar {
				height: 25%;
				padding: 5%;
				box-sizing: border-box;
			}
	
	
			.bar-title {
				font-size: 20px;
				text-transform: uppercase;
				font-family: sans-serif;
				color: #111;
			}
			.bar-fill {
				background: #111;
				width: 0;
				height: 50%;
			}

	</style>
</head>
<body>
	

	<div class="bar">
		<div class="bar-title">linear</div>
		<div class="bar-fill" id="fill1"></div>
	</div>


	<div class="bar">
		<div class="bar-title">smoothstep</div>
		<div class="bar-fill" id="fill2"></div>
	</div>

	<div class="bar">
		<div class="bar-title">smootherstep</div>
		<div class="bar-fill" id="fill3"></div>
	</div>

	<div class="bar">
		<div class="bar-title">powerInOut 3</div>
		<div class="bar-fill" id="fill4"></div>
	</div>


	
	<script type="module">
  	import animate, {curve, blend} from '../main.js'
	
		var fill1 = document.getElementById('fill1')
		var fill2 = document.getElementById('fill2')
		var fill3 = document.getElementById('fill3')
		var fill4 = document.getElementById('fill4')

		var fill = function() {

			//Create a new animate scope to slow down tween duration
			var {delay, tween, every} = animate.scope(0.5)


			return delay(0.5).then(() => every([

				//Linear
				tween({duration: 1}, blend.style(fill1, {width:'100%'})),
				
				//Smoothstep
				tween({duration: 1, curve:curve.smoothstep}, blend.style(fill2, {width:'100%'})),

				//Smootherstep
				tween({duration: 1, curve:curve.smootherstep}, blend.style(fill3, {width:'100%'})),

				//Power 3
				tween({duration: 1, curve:curve.powerInOut(3)}, blend.style(fill4, {width:'100%'})),

			]))

		}


		var reset = function() {

			return animate.tween({duration: 3}, blend.style(document.body, {backgroundColor:'#111111'}))

				.then(() => {
					
					fill1.style.width = 0
					fill2.style.width = 0
					fill3.style.width = 0
					fill4.style.width = 0

				 	return animate.tween({duration: 1}, blend.style(document.body, {backgroundColor:'#ffffff'}))

				})
		}


		var loop = function() {
			return fill().then(reset).then(loop)
		}

		loop()

	</script>

	

</body>
</html>