<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>animate - tween</title>
	<style>
			html, body {
				height: 100%;
				margin: 0;
				background: #FFF;
			}
			div {
				background: #f09;
				height: 25%;
				width: 0;
			}

	</style>
</head>
<body>
	
	<div id="bar1"></div>
	<div id="bar2"></div>
	<div id="bar3"></div>	
	<div id="bar4"></div>	
	
	<script type="module">
  	import animate, {curve, lerp} from '../src/animate.js'
	
		var bar1 = document.getElementById('bar1')
		var bar2 = document.getElementById('bar2')
		var bar3 = document.getElementById('bar3')
		var bar4 = document.getElementById('bar4')



		var interpWidth = function(el, begin, end) {
			return function(f) {
				el.style.width = lerp.float(begin, end, f) + '%'
			}
		}


		var fill = function() {

			//Create a new animate scope to slow down tween duration
			var scope = animate.scope()

			return scope.every([

				//Linear
				scope.tween({duration: 1}, interpWidth(bar1, 0, 100)),
				
				//Smoothstep
				scope.tween({duration: 1, curve:curve.smoothstep}, interpWidth(bar2, 0, 100)),

				//Smootherstep
				scope.tween({duration: 1, curve:curve.smootherstep}, interpWidth(bar3, 0, 100)),

				//Power 3
				scope.tween({duration: 1, curve:curve.powerInOut(3)}, interpWidth(bar4, 0, 100)),

			])

		}


		var reset = function() {

			bar1.style.width = 0
			bar2.style.width = 0
			bar3.style.width = 0
			bar4.style.width = 0
			document.body.style.backgroundColor = '#f09'

			return animate.tween({duration: 2}, (f) => {
				document.body.style.backgroundColor = '#' + lerp.color(0xff0099, 0xffffff, f).toString(16)
			})
			

		}


		var loop = function() {
			return fill().then(reset).then(loop)
		}

		loop()



	</script>

	

</body>
</html>